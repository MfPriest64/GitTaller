---

- hosts: linux
  remote_user: sysadmin
  become: yes
  become_method: sudo


  tasks:


  - name: Actualizar paquetes en Red Hat
    dnf:
      name: "*"
      state: latest
      update_onle: yes
    when: ansible_os_family == "RedHat"
    notify: Reiniciar Servidor

  - name: Habilitar firewall
    firewalld:
      permanent: yes
      state: enable
      port: 22/tcp     
    when: ansible_os_family == "RedHat"            

  - name: Actualizar Paquetes en Debian
    apt:
      name: "*"
      state: latest
      update_cache: yes
      when: ansible_os_family == "Debian"
    notify: Reiniciar servidor


  handlers:
  - name: Reiniciar Servidor
    reboot: 
